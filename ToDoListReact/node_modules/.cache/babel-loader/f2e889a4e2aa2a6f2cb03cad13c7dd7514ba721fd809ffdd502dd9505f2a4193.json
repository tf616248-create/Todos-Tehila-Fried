{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{api}from\"./service\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Tasks(){const[tasks,setTasks]=useState([]);const[newTask,setNewTask]=useState(\"\");const navigate=useNavigate();const loadTasks=async()=>{try{const data=await api.getTasks();if(!data)return;// אם אין token, כבר הפנה לעמוד login\nsetTasks(data);}catch(err){console.error(err);alert(\"Failed to load tasks. You might need to login.\");}};const handleAddTask=async()=>{if(!newTask)return;try{await api.addTask(newTask);setNewTask(\"\");loadTasks();}catch(err){console.error(err);alert(\"Failed to add task.\");}};const toggleComplete=async(id,currentStatus)=>{try{await api.setCompleted(id,!currentStatus);await loadTasks();// Refresh the tasks list\n}catch(error){console.error(\"Error updating task status:\",error);alert(\"Failed to update task status\");}};useEffect(()=>{// בדיקה אם יש token\nconst token=localStorage.getItem(\"token\");if(!token){navigate(\"/login\");return;}loadTasks();},[navigate]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Tasks\"}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"New task\",value:newTask,onChange:e=>setNewTask(e.target.value)}),/*#__PURE__*/_jsx(\"button\",{onClick:handleAddTask,children:\"Add Task\"}),/*#__PURE__*/_jsx(\"ul\",{style:{listStyle:'none',padding:0},children:tasks.map(task=>/*#__PURE__*/_jsxs(\"li\",{style:{display:'flex',alignItems:'center',margin:'5px 0',textDecoration:task.isComplete?'line-through':'none'},children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:task.isComplete||false,onChange:()=>toggleComplete(task.id,task.isComplete),style:{marginRight:'10px'}}),task.name]},task.id))}),\"    \"]});}","map":{"version":3,"names":["React","useEffect","useState","api","useNavigate","jsx","_jsx","jsxs","_jsxs","Tasks","tasks","setTasks","newTask","setNewTask","navigate","loadTasks","data","getTasks","err","console","error","alert","handleAddTask","addTask","toggleComplete","id","currentStatus","setCompleted","token","localStorage","getItem","children","placeholder","value","onChange","e","target","onClick","style","listStyle","padding","map","task","display","alignItems","margin","textDecoration","isComplete","type","checked","marginRight","name"],"sources":["C:/Users/user1/Documents/תכנות תשפו/פרקטי-קוד/3/ToDoListReact/src/Tasks.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { api } from \"./service\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nexport default function Tasks() {\r\n  const [tasks, setTasks] = useState([]);\r\n  const [newTask, setNewTask] = useState(\"\");\r\n  const navigate = useNavigate();\r\n\r\n  const loadTasks = async () => {\r\n    try {\r\n      const data = await api.getTasks();\r\n      if (!data) return; // אם אין token, כבר הפנה לעמוד login\r\n      setTasks(data);\r\n    } catch (err) {\r\n      console.error(err);\r\n      alert(\"Failed to load tasks. You might need to login.\");\r\n    }\r\n  };\r\n\r\n  const handleAddTask = async () => {\r\n    if (!newTask) return;\r\n    try {\r\n      await api.addTask(newTask);\r\n      setNewTask(\"\");\r\n      loadTasks();\r\n    } catch (err) {\r\n      console.error(err);\r\n      alert(\"Failed to add task.\");\r\n    }\r\n  };\r\n  const toggleComplete = async (id, currentStatus) => {\r\n    try {\r\n      await api.setCompleted(id, !currentStatus);\r\n      await loadTasks(); // Refresh the tasks list\r\n    } catch (error) {\r\n      console.error(\"Error updating task status:\", error);\r\n      alert(\"Failed to update task status\");\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    // בדיקה אם יש token\r\n    const token = localStorage.getItem(\"token\");\r\n    if (!token) {\r\n      navigate(\"/login\");\r\n      return;\r\n    }\r\n    loadTasks();\r\n  }, [navigate]);\r\n\r\n  return (\r\n    <div>\r\n      <h2>Tasks</h2>\r\n      <input\r\n        placeholder=\"New task\"\r\n        value={newTask}\r\n        onChange={(e) => setNewTask(e.target.value)}\r\n      />\r\n      <button onClick={handleAddTask}>Add Task</button>\r\n      <ul style={{ listStyle: 'none', padding: 0 }}>\r\n  {tasks.map((task) => (\r\n    <li \r\n      key={task.id} \r\n      style={{ \r\n        display: 'flex', \r\n        alignItems: 'center', \r\n        margin: '5px 0',\r\n        textDecoration: task.isComplete ? 'line-through' : 'none'\r\n      }}\r\n    >\r\n      <input\r\n        type=\"checkbox\"\r\n        checked={task.isComplete || false}\r\n        onChange={() => toggleComplete(task.id, task.isComplete)}\r\n        style={{ marginRight: '10px' }}\r\n      />\r\n      {task.name}\r\n    </li>\r\n  ))}\r\n</ul>    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}