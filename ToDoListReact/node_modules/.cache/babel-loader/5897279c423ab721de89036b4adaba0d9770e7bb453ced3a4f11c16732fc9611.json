{"ast":null,"code":"// import React, { useEffect, useState } from \"react\";\n// import { api } from \"./service\";\n// import { useNavigate } from \"react-router-dom\";\n// export default function Tasks() {\n//   const [tasks, setTasks] = useState([]);\n//   const [newTask, setNewTask] = useState(\"\");\n//   const navigate = useNavigate();\n//   const loadTasks = async () => {\n//     try {\n//       const data = await api.getTasks();\n//       if (!data) return; // אם אין token, כבר הפנה לעמוד login\n//       setTasks(data);\n//     } catch (err) {\n//       console.error(err);\n//       alert(\"Failed to load tasks. You might need to login.\");\n//     }\n//   };\n//   const handleAddTask = async () => {\n//     if (!newTask) return;\n//     try {\n//       await api.addTask(newTask);\n//       setNewTask(\"\");\n//       loadTasks();\n//     } catch (err) {\n//       console.error(err);\n//       alert(\"Failed to add task.\");\n//     }\n//   };\n//   const toggleComplete = async (id, currentStatus) => {\n//     try {\n//       await api.setCompleted(id, !currentStatus);\n//       await loadTasks(); // Refresh the tasks list\n//     } catch (error) {\n//       console.error(\"Error updating task status:\", error);\n//       alert(\"Failed to update task status\");\n//     }\n//   };\n//   useEffect(() => {\n//     // בדיקה אם יש token\n//     const token = localStorage.getItem(\"token\");\n//     if (!token) {\n//       navigate(\"/login\");\n//       return;\n//     }\n//     loadTasks();\n//   }, [navigate]);\n//   return (\n//     <div>\n//       <h2>Tasks</h2>\n//       <input\n//         placeholder=\"New task\"\n//         value={newTask}\n//         onChange={(e) => setNewTask(e.target.value)}\n//       />\n//       <button onClick={handleAddTask}>Add Task</button>\n//       <ul style={{ listStyle: 'none', padding: 0 }}>\n//   {tasks.map((task) => (\n//     <li \n//       key={task.id} \n//       style={{ \n//         display: 'flex', \n//         alignItems: 'center', \n//         margin: '5px 0',\n//         textDecoration: task.isComplete ? 'line-through' : 'none'\n//       }}\n//     >\n//       <input\n//         type=\"checkbox\"\n//         checked={task.isComplete || false}\n//         onChange={() => toggleComplete(task.id, task.isComplete)}\n//         style={{ marginRight: '10px' }}\n//       />\n//       {task.name}\n//     </li>\n//   ))}\n// </ul>    </div>\n//   );\n// }\nimport React,{useEffect,useState}from\"react\";import{api}from\"./service\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Tasks(){const[tasks,setTasks]=useState([]);const[newTask,setNewTask]=useState(\"\");const navigate=useNavigate();// --- טעינת המשימות ---\nconst loadTasks=async()=>{try{const data=await api.getTasks();if(!data)return;// אם אין token, כבר הפנה לעמוד login\nsetTasks(data);}catch(err){console.error(err);alert(\"Failed to load tasks. You might need to login.\");}};// --- הוספת משימה חדשה ---\nconst handleAddTask=async()=>{if(!newTask)return;try{await api.addTask(newTask);setNewTask(\"\");loadTasks();}catch(err){console.error(err);alert(\"Failed to add task.\");}};// --- עדכון סטטוס משימה ---\nconst toggleComplete=async(id,currentStatus)=>{try{await api.setCompleted(id,!currentStatus);loadTasks();// רענון הרשימה\n}catch(error){console.error(\"Error updating task status:\",error);alert(\"Failed to update task status\");}};// --- מחיקת משימה ---\nconst handleDeleteTask=async id=>{try{await api.deleteTask(id);loadTasks();// רענון הרשימה\n}catch(err){console.error(err);alert(\"Failed to delete task.\");}};// --- בדיקה אם המשתמש מחובר ---\nuseEffect(()=>{const token=localStorage.getItem(\"token\");if(!token){navigate(\"/login\");return;}loadTasks();},[navigate]);// --- ממשק המשתמש ---\nreturn/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Tasks\"}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"New task\",value:newTask,onChange:e=>setNewTask(e.target.value)}),/*#__PURE__*/_jsx(\"button\",{onClick:handleAddTask,children:\"Add Task\"}),/*#__PURE__*/_jsx(\"ul\",{style:{listStyle:'none',padding:0},children:tasks.map(task=>/*#__PURE__*/_jsxs(\"li\",{style:{display:'flex',alignItems:'center',margin:'5px 0'},children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:task.isComplete||false,onChange:()=>toggleComplete(task.id,task.isComplete),style:{marginRight:'10px'}}),/*#__PURE__*/_jsx(\"span\",{style:{textDecoration:task.isComplete?'line-through':'none',flex:1},children:task.name}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDeleteTask(task.id),style:{marginLeft:'10px'},children:\"Delete\"})]},task.id))})]});}","map":{"version":3,"names":["React","useEffect","useState","api","useNavigate","jsx","_jsx","jsxs","_jsxs","Tasks","tasks","setTasks","newTask","setNewTask","navigate","loadTasks","data","getTasks","err","console","error","alert","handleAddTask","addTask","toggleComplete","id","currentStatus","setCompleted","handleDeleteTask","deleteTask","token","localStorage","getItem","children","placeholder","value","onChange","e","target","onClick","style","listStyle","padding","map","task","display","alignItems","margin","type","checked","isComplete","marginRight","textDecoration","flex","name","marginLeft"],"sources":["C:/Users/user1/Documents/תכנות תשפו/פרקטי-קוד/3/ToDoListReact/src/Tasks.js"],"sourcesContent":["// import React, { useEffect, useState } from \"react\";\r\n// import { api } from \"./service\";\r\n// import { useNavigate } from \"react-router-dom\";\r\n\r\n// export default function Tasks() {\r\n//   const [tasks, setTasks] = useState([]);\r\n//   const [newTask, setNewTask] = useState(\"\");\r\n//   const navigate = useNavigate();\r\n\r\n//   const loadTasks = async () => {\r\n//     try {\r\n//       const data = await api.getTasks();\r\n//       if (!data) return; // אם אין token, כבר הפנה לעמוד login\r\n//       setTasks(data);\r\n//     } catch (err) {\r\n//       console.error(err);\r\n//       alert(\"Failed to load tasks. You might need to login.\");\r\n//     }\r\n//   };\r\n\r\n//   const handleAddTask = async () => {\r\n//     if (!newTask) return;\r\n//     try {\r\n//       await api.addTask(newTask);\r\n//       setNewTask(\"\");\r\n//       loadTasks();\r\n//     } catch (err) {\r\n//       console.error(err);\r\n//       alert(\"Failed to add task.\");\r\n//     }\r\n//   };\r\n//   const toggleComplete = async (id, currentStatus) => {\r\n//     try {\r\n//       await api.setCompleted(id, !currentStatus);\r\n//       await loadTasks(); // Refresh the tasks list\r\n//     } catch (error) {\r\n//       console.error(\"Error updating task status:\", error);\r\n//       alert(\"Failed to update task status\");\r\n//     }\r\n//   };\r\n\r\n//   useEffect(() => {\r\n//     // בדיקה אם יש token\r\n//     const token = localStorage.getItem(\"token\");\r\n//     if (!token) {\r\n//       navigate(\"/login\");\r\n//       return;\r\n//     }\r\n//     loadTasks();\r\n//   }, [navigate]);\r\n\r\n//   return (\r\n//     <div>\r\n//       <h2>Tasks</h2>\r\n//       <input\r\n//         placeholder=\"New task\"\r\n//         value={newTask}\r\n//         onChange={(e) => setNewTask(e.target.value)}\r\n//       />\r\n//       <button onClick={handleAddTask}>Add Task</button>\r\n//       <ul style={{ listStyle: 'none', padding: 0 }}>\r\n//   {tasks.map((task) => (\r\n//     <li \r\n//       key={task.id} \r\n//       style={{ \r\n//         display: 'flex', \r\n//         alignItems: 'center', \r\n//         margin: '5px 0',\r\n//         textDecoration: task.isComplete ? 'line-through' : 'none'\r\n//       }}\r\n//     >\r\n//       <input\r\n//         type=\"checkbox\"\r\n//         checked={task.isComplete || false}\r\n//         onChange={() => toggleComplete(task.id, task.isComplete)}\r\n//         style={{ marginRight: '10px' }}\r\n//       />\r\n//       {task.name}\r\n//     </li>\r\n//   ))}\r\n// </ul>    </div>\r\n//   );\r\n// }\r\n\r\n\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { api } from \"./service\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nexport default function Tasks() {\r\n  const [tasks, setTasks] = useState([]);\r\n  const [newTask, setNewTask] = useState(\"\");\r\n  const navigate = useNavigate();\r\n\r\n  // --- טעינת המשימות ---\r\n  const loadTasks = async () => {\r\n    try {\r\n      const data = await api.getTasks();\r\n      if (!data) return; // אם אין token, כבר הפנה לעמוד login\r\n      setTasks(data);\r\n    } catch (err) {\r\n      console.error(err);\r\n      alert(\"Failed to load tasks. You might need to login.\");\r\n    }\r\n  };\r\n\r\n  // --- הוספת משימה חדשה ---\r\n  const handleAddTask = async () => {\r\n    if (!newTask) return;\r\n    try {\r\n      await api.addTask(newTask);\r\n      setNewTask(\"\");\r\n      loadTasks();\r\n    } catch (err) {\r\n      console.error(err);\r\n      alert(\"Failed to add task.\");\r\n    }\r\n  };\r\n\r\n  // --- עדכון סטטוס משימה ---\r\n  const toggleComplete = async (id, currentStatus) => {\r\n    try {\r\n      await api.setCompleted(id, !currentStatus);\r\n      loadTasks(); // רענון הרשימה\r\n    } catch (error) {\r\n      console.error(\"Error updating task status:\", error);\r\n      alert(\"Failed to update task status\");\r\n    }\r\n  };\r\n\r\n  // --- מחיקת משימה ---\r\n  const handleDeleteTask = async (id) => {\r\n    try {\r\n      await api.deleteTask(id);\r\n      loadTasks(); // רענון הרשימה\r\n    } catch (err) {\r\n      console.error(err);\r\n      alert(\"Failed to delete task.\");\r\n    }\r\n  };\r\n\r\n  // --- בדיקה אם המשתמש מחובר ---\r\n  useEffect(() => {\r\n    const token = localStorage.getItem(\"token\");\r\n    if (!token) {\r\n      navigate(\"/login\");\r\n      return;\r\n    }\r\n    loadTasks();\r\n  }, [navigate]);\r\n\r\n  // --- ממשק המשתמש ---\r\n  return (\r\n    <div>\r\n      <h2>Tasks</h2>\r\n      <input\r\n        placeholder=\"New task\"\r\n        value={newTask}\r\n        onChange={(e) => setNewTask(e.target.value)}\r\n      />\r\n      <button onClick={handleAddTask}>Add Task</button>\r\n\r\n      <ul style={{ listStyle: 'none', padding: 0 }}>\r\n        {tasks.map((task) => (\r\n          <li \r\n          key={task.id} \r\n          style={{ display: 'flex', alignItems: 'center', margin: '5px 0' }}\r\n        >\r\n          <input\r\n            type=\"checkbox\"\r\n            checked={task.isComplete || false}\r\n            onChange={() => toggleComplete(task.id, task.isComplete)}\r\n            style={{ marginRight: '10px' }}\r\n          />\r\n          <span style={{ textDecoration: task.isComplete ? 'line-through' : 'none', flex: 1 }}>\r\n            {task.name}\r\n          </span>\r\n          <button\r\n            onClick={() => handleDeleteTask(task.id)}\r\n            style={{ marginLeft: '10px' }}\r\n          >\r\n            Delete\r\n          </button>\r\n        </li>\r\n        \r\n        ))}\r\n      </ul>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}