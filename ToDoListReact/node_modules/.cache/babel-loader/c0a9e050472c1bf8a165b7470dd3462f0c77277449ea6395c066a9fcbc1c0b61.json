{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{api}from\"./service\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Login(){const[username,setUsername]=useState(\"\");const[password,setPassword]=useState(\"\");const navigate=useNavigate();// בדיקה אם כבר קיים JWT\nuseEffect(()=>{const token=localStorage.getItem(\"token\");if(token){// אם יש טוקן, מפנים ישר לדף המשימות\nnavigate(\"/tasks\");}},[navigate]);const handleSubmit=async e=>{e.preventDefault();try{// קריאה ל־API להתחברות\nconst response=await api.login(username,password);if(response&&response.data&&response.data.token){// שמירת JWT ב-localStorage\nlocalStorage.setItem(\"token\",response.data.token);console.log(\"Token saved:\",response.data.token);// הפניה לדף המשימות\nnavigate(\"/tasks\");}else{console.error(\"No token in response:\",response);alert(\"התחברות נכשלה - לא התקבל טוקן\");}}catch(err){console.error(\"Login error:\",err);if(err.response){console.error(\"Response data:\",err.response.data);console.error(\"Response status:\",err.response.status);}alert(\"שם משתמש או סיסמה לא נכונים\");}};return/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,style:{display:\"flex\",flexDirection:\"column\",maxWidth:\"300px\",margin:\"auto\",marginTop:\"100px\"},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Login\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Username\",value:username,onChange:e=>setUsername(e.target.value),required:true,style:{marginBottom:\"10px\",padding:\"8px\"}}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"Password\",value:password,onChange:e=>setPassword(e.target.value),required:true,style:{marginBottom:\"10px\",padding:\"8px\"}}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",style:{padding:\"10px\"},children:\"Login\"})]});}","map":{"version":3,"names":["React","useState","useEffect","api","useNavigate","jsx","_jsx","jsxs","_jsxs","Login","username","setUsername","password","setPassword","navigate","token","localStorage","getItem","handleSubmit","e","preventDefault","response","login","data","setItem","console","log","error","alert","err","status","onSubmit","style","display","flexDirection","maxWidth","margin","marginTop","children","type","placeholder","value","onChange","target","required","marginBottom","padding"],"sources":["C:/Users/user1/Documents/תכנות תשפו/פרקטי-קוד/3/ToDoListReact/src/Login.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { api } from \"./service\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nexport default function Login() {\r\n  const [username, setUsername] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const navigate = useNavigate();\r\n\r\n  // בדיקה אם כבר קיים JWT\r\n  useEffect(() => {\r\n    const token = localStorage.getItem(\"token\");\r\n    if (token) {\r\n      // אם יש טוקן, מפנים ישר לדף המשימות\r\n      navigate(\"/tasks\");\r\n    }\r\n  }, [navigate]);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      // קריאה ל־API להתחברות\r\n      const response = await api.login(username, password);\r\n      \r\n      if (response && response.data && response.data.token) {\r\n        // שמירת JWT ב-localStorage\r\n        localStorage.setItem(\"token\", response.data.token);\r\n        console.log(\"Token saved:\", response.data.token);\r\n        \r\n        // הפניה לדף המשימות\r\n        navigate(\"/tasks\");\r\n      } else {\r\n        console.error(\"No token in response:\", response);\r\n        alert(\"התחברות נכשלה - לא התקבל טוקן\");\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Login error:\", err);\r\n      if (err.response) {\r\n        console.error(\"Response data:\", err.response.data);\r\n        console.error(\"Response status:\", err.response.status);\r\n      }\r\n      alert(\"שם משתמש או סיסמה לא נכונים\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <form\r\n      onSubmit={handleSubmit}\r\n      style={{\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        maxWidth: \"300px\",\r\n        margin: \"auto\",\r\n        marginTop: \"100px\"\r\n      }}\r\n    >\r\n      <h2>Login</h2>\r\n      <input\r\n        type=\"text\"\r\n        placeholder=\"Username\"\r\n        value={username}\r\n        onChange={(e) => setUsername(e.target.value)}\r\n        required\r\n        style={{ marginBottom: \"10px\", padding: \"8px\" }}\r\n      />\r\n      <input\r\n        type=\"password\"\r\n        placeholder=\"Password\"\r\n        value={password}\r\n        onChange={(e) => setPassword(e.target.value)}\r\n        required\r\n        style={{ marginBottom: \"10px\", padding: \"8px\" }}\r\n      />\r\n      <button type=\"submit\" style={{ padding: \"10px\" }}>\r\n        Login\r\n      </button>\r\n    </form>\r\n  );\r\n}\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,GAAG,KAAQ,WAAW,CAC/B,OAASC,WAAW,KAAQ,kBAAkB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE/C,cAAe,SAAS,CAAAC,KAAKA,CAAA,CAAG,CAC9B,KAAM,CAACC,QAAQ,CAAEC,WAAW,CAAC,CAAGV,QAAQ,CAAC,EAAE,CAAC,CAC5C,KAAM,CAACW,QAAQ,CAAEC,WAAW,CAAC,CAAGZ,QAAQ,CAAC,EAAE,CAAC,CAC5C,KAAM,CAAAa,QAAQ,CAAGV,WAAW,CAAC,CAAC,CAE9B;AACAF,SAAS,CAAC,IAAM,CACd,KAAM,CAAAa,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAC3C,GAAIF,KAAK,CAAE,CACT;AACAD,QAAQ,CAAC,QAAQ,CAAC,CACpB,CACF,CAAC,CAAE,CAACA,QAAQ,CAAC,CAAC,CAEd,KAAM,CAAAI,YAAY,CAAG,KAAO,CAAAC,CAAC,EAAK,CAChCA,CAAC,CAACC,cAAc,CAAC,CAAC,CAClB,GAAI,CACF;AACA,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAlB,GAAG,CAACmB,KAAK,CAACZ,QAAQ,CAAEE,QAAQ,CAAC,CAEpD,GAAIS,QAAQ,EAAIA,QAAQ,CAACE,IAAI,EAAIF,QAAQ,CAACE,IAAI,CAACR,KAAK,CAAE,CACpD;AACAC,YAAY,CAACQ,OAAO,CAAC,OAAO,CAAEH,QAAQ,CAACE,IAAI,CAACR,KAAK,CAAC,CAClDU,OAAO,CAACC,GAAG,CAAC,cAAc,CAAEL,QAAQ,CAACE,IAAI,CAACR,KAAK,CAAC,CAEhD;AACAD,QAAQ,CAAC,QAAQ,CAAC,CACpB,CAAC,IAAM,CACLW,OAAO,CAACE,KAAK,CAAC,uBAAuB,CAAEN,QAAQ,CAAC,CAChDO,KAAK,CAAC,+BAA+B,CAAC,CACxC,CACF,CAAE,MAAOC,GAAG,CAAE,CACZJ,OAAO,CAACE,KAAK,CAAC,cAAc,CAAEE,GAAG,CAAC,CAClC,GAAIA,GAAG,CAACR,QAAQ,CAAE,CAChBI,OAAO,CAACE,KAAK,CAAC,gBAAgB,CAAEE,GAAG,CAACR,QAAQ,CAACE,IAAI,CAAC,CAClDE,OAAO,CAACE,KAAK,CAAC,kBAAkB,CAAEE,GAAG,CAACR,QAAQ,CAACS,MAAM,CAAC,CACxD,CACAF,KAAK,CAAC,6BAA6B,CAAC,CACtC,CACF,CAAC,CAED,mBACEpB,KAAA,SACEuB,QAAQ,CAAEb,YAAa,CACvBc,KAAK,CAAE,CACLC,OAAO,CAAE,MAAM,CACfC,aAAa,CAAE,QAAQ,CACvBC,QAAQ,CAAE,OAAO,CACjBC,MAAM,CAAE,MAAM,CACdC,SAAS,CAAE,OACb,CAAE,CAAAC,QAAA,eAEFhC,IAAA,OAAAgC,QAAA,CAAI,OAAK,CAAI,CAAC,cACdhC,IAAA,UACEiC,IAAI,CAAC,MAAM,CACXC,WAAW,CAAC,UAAU,CACtBC,KAAK,CAAE/B,QAAS,CAChBgC,QAAQ,CAAGvB,CAAC,EAAKR,WAAW,CAACQ,CAAC,CAACwB,MAAM,CAACF,KAAK,CAAE,CAC7CG,QAAQ,MACRZ,KAAK,CAAE,CAAEa,YAAY,CAAE,MAAM,CAAEC,OAAO,CAAE,KAAM,CAAE,CACjD,CAAC,cACFxC,IAAA,UACEiC,IAAI,CAAC,UAAU,CACfC,WAAW,CAAC,UAAU,CACtBC,KAAK,CAAE7B,QAAS,CAChB8B,QAAQ,CAAGvB,CAAC,EAAKN,WAAW,CAACM,CAAC,CAACwB,MAAM,CAACF,KAAK,CAAE,CAC7CG,QAAQ,MACRZ,KAAK,CAAE,CAAEa,YAAY,CAAE,MAAM,CAAEC,OAAO,CAAE,KAAM,CAAE,CACjD,CAAC,cACFxC,IAAA,WAAQiC,IAAI,CAAC,QAAQ,CAACP,KAAK,CAAE,CAAEc,OAAO,CAAE,MAAO,CAAE,CAAAR,QAAA,CAAC,OAElD,CAAQ,CAAC,EACL,CAAC,CAEX","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}