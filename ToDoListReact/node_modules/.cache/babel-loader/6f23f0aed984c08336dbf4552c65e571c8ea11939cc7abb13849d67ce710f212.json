{"ast":null,"code":"import React,{useState}from\"react\";import{api}from\"./service\";import{useNavigate,Link}from\"react-router-dom\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Register(){const[username,setUsername]=useState(\"\");const[password,setPassword]=useState(\"\");const[error,setError]=useState(\"\");const[isLoading,setIsLoading]=useState(false);const navigate=useNavigate();const handleSubmit=async e=>{e.preventDefault();setError(\"\");if(!username.trim()||!password.trim()){setError(\"אנא מלא את כל השדות\");return;}setIsLoading(true);try{const response=await api.register(username,password);if(response&&response.data){var _loginRes$data;alert(\"המשתמש נוצר בהצלחה!\");const loginRes=await api.login(username,password);if(loginRes!==null&&loginRes!==void 0&&(_loginRes$data=loginRes.data)!==null&&_loginRes$data!==void 0&&_loginRes$data.token){localStorage.setItem(\"token\",loginRes.data.token);navigate(\"/tasks\");// עכשיו token כבר נשמר\n}else{setError(\"לא התקבל טוקן לאחר הרישום\");}// navigate(\"/login\");\n}}catch(err){var _err$response,_err$response$data;console.error(\"Registration error:\",err);setError(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message)||\"אירעה שגיאה בעת יצירת המשתמש. אנא נסה שוב.\");}finally{setIsLoading(false);}};return/*#__PURE__*/_jsx(\"div\",{style:styles.container,children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,style:styles.form,children:[/*#__PURE__*/_jsx(\"h2\",{style:styles.title,children:\"\\u05D4\\u05E8\\u05E9\\u05DE\\u05D4\"}),error&&/*#__PURE__*/_jsx(\"div\",{style:styles.error,children:error}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\u05E9\\u05DD \\u05DE\\u05E9\\u05EA\\u05DE\\u05E9\",value:username,onChange:e=>setUsername(e.target.value),style:styles.input,dir:\"rtl\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"\\u05E1\\u05D9\\u05E1\\u05DE\\u05D4\",value:password,onChange:e=>setPassword(e.target.value),style:styles.input,dir:\"rtl\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",style:styles.button,disabled:isLoading,children:isLoading?'מבצע הרשמה...':'הרשם'}),/*#__PURE__*/_jsxs(\"div\",{style:styles.loginLink,children:[/*#__PURE__*/_jsx(Link,{to:\"/login\",onClick:()=>localStorage.removeItem(\"token\"),style:styles.link,children:\"\\u05DB\\u05D1\\u05E8 \\u05D9\\u05E9 \\u05DC\\u05DA \\u05D7\\u05E9\\u05D1\\u05D5\\u05DF? \\u05D4\\u05EA\\u05D7\\u05D1\\u05E8 \\u05DB\\u05D0\\u05DF\"}),\"        \"]})]})});}const styles={container:{display:'flex',justifyContent:'center',alignItems:'center',minHeight:'100vh',backgroundColor:'#f5f5f5',fontFamily:'Arial, sans-serif'},form:{backgroundColor:'white',padding:'30px',borderRadius:'8px',boxShadow:'0 2px 10px rgba(0, 0, 0, 0.1)',width:'100%',maxWidth:'400px',textAlign:'center'},title:{marginBottom:'20px',color:'#333'},input:{width:'100%',padding:'12px',margin:'10px 0',border:'1px solid #ddd',borderRadius:'4px',fontSize:'16px'},button:{width:'100%',padding:'12px',marginTop:'10px',backgroundColor:'#4CAF50',color:'white',border:'none',borderRadius:'4px',cursor:'pointer',fontSize:'16px'},buttonDisabled:{backgroundColor:'#cccccc',cursor:'not-allowed'},error:{color:'#e74c3c',marginBottom:'15px',textAlign:'center'},loginLink:{marginTop:'15px',color:'#666'},link:{color:'#3498db',textDecoration:'none'}};","map":{"version":3,"names":["React","useState","api","useNavigate","Link","jsx","_jsx","jsxs","_jsxs","Register","username","setUsername","password","setPassword","error","setError","isLoading","setIsLoading","navigate","handleSubmit","e","preventDefault","trim","response","register","data","_loginRes$data","alert","loginRes","login","token","localStorage","setItem","err","_err$response","_err$response$data","console","message","style","styles","container","children","onSubmit","form","title","type","placeholder","value","onChange","target","input","dir","button","disabled","loginLink","to","onClick","removeItem","link","display","justifyContent","alignItems","minHeight","backgroundColor","fontFamily","padding","borderRadius","boxShadow","width","maxWidth","textAlign","marginBottom","color","margin","border","fontSize","marginTop","cursor","buttonDisabled","textDecoration"],"sources":["C:/Users/user1/Documents/תכנות תשפו/פרקטי-קוד/3/ToDoListReact/src/Register.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { api } from \"./service\";\r\nimport { useNavigate, Link } from \"react-router-dom\";\r\n\r\nexport default function Register() {\r\n  const [username, setUsername] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [error, setError] = useState(\"\");\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const navigate = useNavigate();\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setError(\"\");\r\n    \r\n    if (!username.trim() || !password.trim()) {\r\n      setError(\"אנא מלא את כל השדות\");\r\n      return;\r\n    }\r\n\r\n    setIsLoading(true);\r\n    \r\n    try {\r\n      const response = await api.register(username, password);\r\n      if (response && response.data) {\r\n        alert(\"המשתמש נוצר בהצלחה!\");\r\n        const loginRes = await api.login(username, password);\r\n        if (loginRes?.data?.token) {\r\n          localStorage.setItem(\"token\", loginRes.data.token);\r\n          navigate(\"/tasks\"); // עכשיו token כבר נשמר\r\n        } else {\r\n          setError(\"לא התקבל טוקן לאחר הרישום\");\r\n        }\r\n        // navigate(\"/login\");\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Registration error:\", err);\r\n      setError(\r\n        err.response?.data?.message || \r\n        \"אירעה שגיאה בעת יצירת המשתמש. אנא נסה שוב.\"\r\n      );\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div style={styles.container}>\r\n      <form onSubmit={handleSubmit} style={styles.form}>\r\n        <h2 style={styles.title}>הרשמה</h2>\r\n        \r\n        {error && <div style={styles.error}>{error}</div>}\r\n        \r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"שם משתמש\"\r\n          value={username}\r\n          onChange={(e) => setUsername(e.target.value)}\r\n          style={styles.input}\r\n          dir=\"rtl\"\r\n        />\r\n        \r\n        <input\r\n          type=\"password\"\r\n          placeholder=\"סיסמה\"\r\n          value={password}\r\n          onChange={(e) => setPassword(e.target.value)}\r\n          style={styles.input}\r\n          dir=\"rtl\"\r\n        />\r\n        \r\n        <button \r\n          type=\"submit\" \r\n          style={styles.button}\r\n          disabled={isLoading}\r\n        >\r\n          {isLoading ? 'מבצע הרשמה...' : 'הרשם'}\r\n        </button>\r\n        \r\n        <div style={styles.loginLink}>\r\n        <Link \r\n  to=\"/login\" \r\n  onClick={() => localStorage.removeItem(\"token\")}\r\n  style={styles.link}\r\n>\r\n  כבר יש לך חשבון? התחבר כאן\r\n</Link>        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst styles = {\r\n  container: {\r\n    display: 'flex',\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    minHeight: '100vh',\r\n    backgroundColor: '#f5f5f5',\r\n    fontFamily: 'Arial, sans-serif',\r\n  },\r\n  form: {\r\n    backgroundColor: 'white',\r\n    padding: '30px',\r\n    borderRadius: '8px',\r\n    boxShadow: '0 2px 10px rgba(0, 0, 0, 0.1)',\r\n    width: '100%',\r\n    maxWidth: '400px',\r\n    textAlign: 'center',\r\n  },\r\n  title: {\r\n    marginBottom: '20px',\r\n    color: '#333',\r\n  },\r\n  input: {\r\n    width: '100%',\r\n    padding: '12px',\r\n    margin: '10px 0',\r\n    border: '1px solid #ddd',\r\n    borderRadius: '4px',\r\n    fontSize: '16px',\r\n  },\r\n  button: {\r\n    width: '100%',\r\n    padding: '12px',\r\n    marginTop: '10px',\r\n    backgroundColor: '#4CAF50',\r\n    color: 'white',\r\n    border: 'none',\r\n    borderRadius: '4px',\r\n    cursor: 'pointer',\r\n    fontSize: '16px',\r\n  },\r\n  buttonDisabled: {\r\n    backgroundColor: '#cccccc',\r\n    cursor: 'not-allowed',\r\n  },\r\n  error: {\r\n    color: '#e74c3c',\r\n    marginBottom: '15px',\r\n    textAlign: 'center',\r\n  },\r\n  loginLink: {\r\n    marginTop: '15px',\r\n    color: '#666',\r\n  },\r\n  link: {\r\n    color: '#3498db',\r\n    textDecoration: 'none',\r\n  },\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}