{"ast":null,"code":"import axios from\"axios\";const apiUrl=\"http://localhost:5024/api\";// יצירת instance של axios\nconst apiClient=axios.create({baseURL:apiUrl// withCredentials: true\n});// --- מוסיפים JWT ל־headers אם קיים ---\napiClient.interceptors.request.use(config=>{const token=localStorage.getItem(\"token\");// שם זהה לשימוש שלך בלוגין\nif(token){config.headers[\"Authorization\"]=\"Bearer \".concat(token);}return config;});// --- Interceptor לטיפול בשגיאות 401 ---\napiClient.interceptors.response.use(response=>response,error=>{if(error.response&&error.response.status===401){console.warn(\"Unauthorized! Redirecting to login...\");window.location.href=\"/login\";}return Promise.reject(error);});export const api={// רישום משתמש חדש\nregister(username,password){return apiClient.post(\"/users/register\",{username,password});},// התחברות משתמש\nlogin(username,password){//   // return apiClient.post(\"/users/login\", { username, password }, { withCredentials: true });\nreturn apiClient.post(\"/users/login\",{username,password});},// שליפת משימות (דורש JWT)\ngetTasks:async()=>{const res=await apiClient.get(\"/items\");return res.data;},// הוספת משימה חדשה\naddTask:async name=>{const res=await apiClient.post(\"/items\",{name,isComplete:false});return res.data;},setCompleted:async(id,isComplete)=>{return apiClient.patch(\"/items/\".concat(id),{isComplete});},deleteTask:async id=>{return apiClient.delete(\"/items/\".concat(id));}};","map":{"version":3,"names":["axios","apiUrl","apiClient","create","baseURL","interceptors","request","use","config","token","localStorage","getItem","headers","concat","response","error","status","console","warn","window","location","href","Promise","reject","api","register","username","password","post","login","getTasks","res","get","data","addTask","name","isComplete","setCompleted","id","patch","deleteTask","delete"],"sources":["C:/Users/user1/Documents/תכנות תשפו/פרקטי-קוד/3/ToDoListReact/src/service.js"],"sourcesContent":["import axios from \"axios\";\n\nconst apiUrl = \"http://localhost:5024/api\";\n\n// יצירת instance של axios\nconst apiClient = axios.create({\n  baseURL: apiUrl,\n  // withCredentials: true\n});\n\n// --- מוסיפים JWT ל־headers אם קיים ---\napiClient.interceptors.request.use(config => {\n  const token = localStorage.getItem(\"token\"); // שם זהה לשימוש שלך בלוגין\n  if (token) {\n    config.headers[\"Authorization\"] = `Bearer ${token}`;\n  }\n  return config;\n});\n\n// --- Interceptor לטיפול בשגיאות 401 ---\napiClient.interceptors.response.use(\n  response => response,\n  error => {\n    if (error.response && error.response.status === 401) {\n      console.warn(\"Unauthorized! Redirecting to login...\");\n      window.location.href = \"/login\";\n    }\n    return Promise.reject(error);\n  }\n);\n\nexport const api = {\n  // רישום משתמש חדש\n  register(username, password) {\n    return apiClient.post(\"/users/register\", { username, password });\n  },\n  \n  // התחברות משתמש\n   login(username, password) {\n  //   // return apiClient.post(\"/users/login\", { username, password }, { withCredentials: true });\n     return apiClient.post(\"/users/login\", { username, password });\n\n   },\n\n  // שליפת משימות (דורש JWT)\n  getTasks: async () => {\n    const res = await apiClient.get(\"/items\");\n    return res.data;\n  },\n\n  // הוספת משימה חדשה\n  addTask: async (name) => {\n    const res = await apiClient.post(\"/items\", { name, isComplete: false });\n    return res.data;\n  },\n  setCompleted: async (id, isComplete) => {\n    return apiClient.patch(`/items/${id}`, { isComplete });\n  },\n  deleteTask: async (id) => {\n    return apiClient.delete(`/items/${id}`);\n  },\n};\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CAEzB,KAAM,CAAAC,MAAM,CAAG,2BAA2B,CAE1C;AACA,KAAM,CAAAC,SAAS,CAAGF,KAAK,CAACG,MAAM,CAAC,CAC7BC,OAAO,CAAEH,MACT;AACF,CAAC,CAAC,CAEF;AACAC,SAAS,CAACG,YAAY,CAACC,OAAO,CAACC,GAAG,CAACC,MAAM,EAAI,CAC3C,KAAM,CAAAC,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAAE;AAC7C,GAAIF,KAAK,CAAE,CACTD,MAAM,CAACI,OAAO,CAAC,eAAe,CAAC,WAAAC,MAAA,CAAaJ,KAAK,CAAE,CACrD,CACA,MAAO,CAAAD,MAAM,CACf,CAAC,CAAC,CAEF;AACAN,SAAS,CAACG,YAAY,CAACS,QAAQ,CAACP,GAAG,CACjCO,QAAQ,EAAIA,QAAQ,CACpBC,KAAK,EAAI,CACP,GAAIA,KAAK,CAACD,QAAQ,EAAIC,KAAK,CAACD,QAAQ,CAACE,MAAM,GAAK,GAAG,CAAE,CACnDC,OAAO,CAACC,IAAI,CAAC,uCAAuC,CAAC,CACrDC,MAAM,CAACC,QAAQ,CAACC,IAAI,CAAG,QAAQ,CACjC,CACA,MAAO,CAAAC,OAAO,CAACC,MAAM,CAACR,KAAK,CAAC,CAC9B,CACF,CAAC,CAED,MAAO,MAAM,CAAAS,GAAG,CAAG,CACjB;AACAC,QAAQA,CAACC,QAAQ,CAAEC,QAAQ,CAAE,CAC3B,MAAO,CAAAzB,SAAS,CAAC0B,IAAI,CAAC,iBAAiB,CAAE,CAAEF,QAAQ,CAAEC,QAAS,CAAC,CAAC,CAClE,CAAC,CAED;AACCE,KAAKA,CAACH,QAAQ,CAAEC,QAAQ,CAAE,CAC3B;AACG,MAAO,CAAAzB,SAAS,CAAC0B,IAAI,CAAC,cAAc,CAAE,CAAEF,QAAQ,CAAEC,QAAS,CAAC,CAAC,CAE/D,CAAC,CAEF;AACAG,QAAQ,CAAE,KAAAA,CAAA,GAAY,CACpB,KAAM,CAAAC,GAAG,CAAG,KAAM,CAAA7B,SAAS,CAAC8B,GAAG,CAAC,QAAQ,CAAC,CACzC,MAAO,CAAAD,GAAG,CAACE,IAAI,CACjB,CAAC,CAED;AACAC,OAAO,CAAE,KAAO,CAAAC,IAAI,EAAK,CACvB,KAAM,CAAAJ,GAAG,CAAG,KAAM,CAAA7B,SAAS,CAAC0B,IAAI,CAAC,QAAQ,CAAE,CAAEO,IAAI,CAAEC,UAAU,CAAE,KAAM,CAAC,CAAC,CACvE,MAAO,CAAAL,GAAG,CAACE,IAAI,CACjB,CAAC,CACDI,YAAY,CAAE,KAAAA,CAAOC,EAAE,CAAEF,UAAU,GAAK,CACtC,MAAO,CAAAlC,SAAS,CAACqC,KAAK,WAAA1B,MAAA,CAAWyB,EAAE,EAAI,CAAEF,UAAW,CAAC,CAAC,CACxD,CAAC,CACDI,UAAU,CAAE,KAAO,CAAAF,EAAE,EAAK,CACxB,MAAO,CAAApC,SAAS,CAACuC,MAAM,WAAA5B,MAAA,CAAWyB,EAAE,CAAE,CAAC,CACzC,CACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}